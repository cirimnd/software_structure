import{e as V,f as P,r as w,u as G,t as I,a as n,g as O,h as y,i as Q,j as N,k as Y,p as X,n as Z,l as ee,m as te,q as oe,s as $,v as q,x as F,y as M,z as ne,A as ae,P as j,B as se,C as le,D as re,E as ie,F as ce,G as ue,H as de,I as me,J as fe,o as ge,c as pe,b as A,w as h,d as L,K as Be,L as ve,M as _e,N as he,O as Ce,Q as we,R as ye,S as be,_ as Se}from"./index-CpaKEeMo.js";import{l as Pe,P as Ee}from"./index-wa1p19ep.js";/* empty css              */import{C as Te}from"./index-1RrrFLqC.js";import"./index-xvabcI5u.js";import{F as ke}from"./index-CU7bnnqT.js";import{R as xe}from"./index-CoDWtlbs.js";import{B as D}from"./index-DhOvqBWh.js";import{u as Ae}from"./use-placeholder-BvAxgC0s.js";import{r as Ie,u as De}from"./use-route-Cm_xussw.js";import"./request-M96MMQ4W.js";const[z,U]=V("action-bar"),J=Symbol(z),Re={placeholder:Boolean,safeAreaInsetBottom:I};var Ve=P({name:z,props:Re,setup(e,{slots:l}){const r=w(),a=Ae(r,U),{linkChildren:c}=G(J);c();const d=()=>{var g;return n("div",{ref:r,class:[U(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(g=l.default)==null?void 0:g.call(l)])};return()=>e.placeholder?a(d):d()}});const Oe=O(Ve),[Ne,Fe]=V("action-bar-button"),Le=y({},Ie,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Ue=P({name:Ne,props:Le,setup(e,{slots:l}){const r=De(),{parent:a,index:c}=Q(J),d=N(()=>{if(a){const i=a.children[c.value-1];return!(i&&"isButton"in i)}}),g=N(()=>{if(a){const i=a.children[c.value+1];return!(i&&"isButton"in i)}});return Y({isButton:!0}),()=>{const{type:i,icon:f,text:B,color:u,loading:t,disabled:p}=e;return n(D,{class:Fe([i,{last:g.value,first:d.value}]),size:"large",type:i,icon:f,color:u,loading:t,disabled:p,onClick:r},{default:()=>[l.default?l.default():B]})}}});const K=O(Ue),[Ke,m,S]=V("dialog"),He=y({},X,{title:String,theme:String,width:Z,message:[String,Function],callback:Function,allowHtml:Boolean,className:ee,transition:te("van-dialog-bounce"),messageAlign:String,closeOnPopstate:I,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:I,closeOnClickOverlay:Boolean}),$e=[...oe,"transition","closeOnPopstate"];var W=P({name:Ke,props:He,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:l,slots:r}){const a=w(),c=$({confirm:!1,cancel:!1}),d=o=>l("update:show",o),g=o=>{var s;d(!1),(s=e.callback)==null||s.call(e,o)},i=o=>()=>{e.show&&(l(o),e.beforeClose?(c[o]=!0,se(e.beforeClose,{args:[o],done(){g(o),c[o]=!1},canceled(){c[o]=!1}})):g(o))},f=i("cancel"),B=i("confirm"),u=q(o=>{var s,v;if(o.target!==((v=(s=a.value)==null?void 0:s.popupRef)==null?void 0:v.value))return;({Enter:e.showConfirmButton?B:F,Escape:e.showCancelButton?f:F})[o.key](),l("keydown",o)},["enter","esc"]),t=()=>{const o=r.title?r.title():e.title;if(o)return n("div",{class:m("header",{isolated:!e.message&&!r.default})},[o])},p=o=>{const{message:s,allowHtml:v,messageAlign:_}=e,b=m("message",{"has-title":o,[_]:_}),x=le(s)?s():s;return v&&typeof x=="string"?n("div",{class:b,innerHTML:x},null):n("div",{class:b},[x])},C=()=>{if(r.default)return n("div",{class:m("content")},[r.default()]);const{title:o,message:s,allowHtml:v}=e;if(s){const _=!!(o||r.title);return n("div",{key:v?1:0,class:m("content",{isolated:!_})},[p(_)])}},E=()=>n("div",{class:[ie,m("footer")]},[e.showCancelButton&&n(D,{size:"large",text:e.cancelButtonText||S("cancel"),class:m("cancel"),style:{color:e.cancelButtonColor},loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:f},null),e.showConfirmButton&&n(D,{size:"large",text:e.confirmButtonText||S("confirm"),class:[m("confirm"),{[re]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:B},null)]),T=()=>n(Oe,{class:m("footer")},{default:()=>[e.showCancelButton&&n(K,{type:"warning",text:e.cancelButtonText||S("cancel"),class:m("cancel"),color:e.cancelButtonColor,loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:f},null),e.showConfirmButton&&n(K,{type:"danger",text:e.confirmButtonText||S("confirm"),class:m("confirm"),color:e.confirmButtonColor,loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:B},null)]}),k=()=>r.footer?r.footer():e.theme==="round-button"?T():E();return()=>{const{width:o,title:s,theme:v,message:_,className:b}=e;return n(j,M({ref:a,role:"dialog",class:[m([v]),b],style:{width:ae(o)},tabindex:0,"aria-labelledby":s||_,onKeydown:u,"onUpdate:show":d},ne(e,$e)),{default:()=>[t(),C(),k()]})}}});let R;const qe={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let Me=y({},qe);function je(){({instance:R}=ue({setup(){const{state:l,toggle:r}=de();return()=>n(W,M(l,{"onUpdate:show":r}),null)}}))}function ze(e){return ce?new Promise((l,r)=>{R||je(),R.open(y({},Me,e,{callback:a=>{(a==="confirm"?l:r)(a)}}))}):Promise.resolve(void 0)}const Je=e=>ze(y({showCancelButton:!0},e));O(W);const H={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_BASE_API:"https://localhost:444",VITE_APP_SOCKET_URL:"https://localhost:3000",VITE_APP_TITLE:"面试系统",VITE_USER_NODE_ENV:"production"},We={class:"container"},Ge=P({__name:"LoginPage",setup(e){const l=w();me(()=>{const{DEV:u}=H;u&&localStorage.getItem("isAuth")!="true"&&Je({title:"温馨提醒",message:`开发环境中使用了自签证书，需要浏览器信任，故请在确认后，信任在新窗口弹出的两个网站，否则无法使用相应功能
(浏览器可能会阻止弹出多个窗口，请授权后刷新)
(信任的具体操作：高级->继续前往 "xxx .com" ;若可以正常打开即已信任，回到登录界面即可)`,messageAlign:"left"}).then(()=>{if(l.value){l.value.target="_blank";const{VITE_APP_BASE_API:t,VITE_APP_SOCKET_URL:p}=H;l.value.href=p,l.value.click(),l.value.href=t,l.value.click()}}).catch(()=>{fe(`T_T
再次刷新可以去信任`)})});const r=w("学生"),a=$({username:"",password:"",role:"CANDICATE"}),c=[{text:"学生",value:"CANDICATE"},{text:"专家",value:"INTERVIEWER"}],d=w(!1),g=({selectedOptions:u})=>{d.value=!1,r.value=u[0].text,a.role=u[0].value},i=ve(),f=_e(),B=async function(){try{const u=await Pe(a);if(u.msg=="success"){if(he("登录成功"),a.role=="CANDICATE"){const t=Ce();t.data.username=a.username,sessionStorage.setItem("data",JSON.stringify(t.data)),sessionStorage.setItem("store","student"),f.query.redirect?i.push(f.query.redirect):i.push("/studentHome")}else if(a.role=="INTERVIEWER"){const t=we();t.data.username=a.username,f.query.redirect?i.push(f.query.redirect):i.push("/expertHome"),sessionStorage.setItem("data",JSON.stringify(t.data)),sessionStorage.setItem("store","expert")}localStorage.setItem("isAuth","true"),sessionStorage.setItem("isAuthenticated",JSON.stringify(!0))}else ye(u.msg)}catch(u){console.error(u)}};return(u,t)=>{const p=xe,C=ke,E=be("router-link"),T=Te,k=Ee,o=j;return ge(),pe(Be,null,[A("div",We,[n(T,{inset:"",class:"login-box"},{default:h(()=>[n(p,{class:"main title",justify:"center"},{default:h(()=>t[6]||(t[6]=[L("登录")])),_:1}),n(C,{class:"title",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),"is-link":"",readonly:"",label:"身份",placeholder:"请选择身份",onClick:t[1]||(t[1]=s=>d.value=!0)},null,8,["modelValue"]),n(C,{class:"title",label:"账号",modelValue:a.username,"onUpdate:modelValue":t[2]||(t[2]=s=>a.username=s),placeholder:"请输入账号"},null,8,["modelValue"]),n(C,{class:"title",label:"密码",modelValue:a.password,"onUpdate:modelValue":t[3]||(t[3]=s=>a.password=s),placeholder:"请输入密码",type:"password",onKeyup:q(B,["enter"])},null,8,["modelValue"]),n(p,{justify:"center"},{default:h(()=>[A("button",{class:"login-btn title",onClick:B},"登录")]),_:1}),n(p,{justify:"end"},{default:h(()=>[n(E,{class:"register-btn title",to:"/register"},{default:h(()=>t[7]||(t[7]=[L("没有账号？立即注册")])),_:1})]),_:1})]),_:1}),n(o,{class:"title",show:d.value,"onUpdate:show":t[5]||(t[5]=s=>d.value=s),round:"",position:"bottom"},{default:h(()=>[n(k,{columns:c,onCancel:t[4]||(t[4]=s=>d.value=!1),onConfirm:g})]),_:1},8,["show"])]),A("a",{ref_key:"auth",ref:l,style:{display:"none"}},null,512)],64)}}}),rt=Se(Ge,[["__scopeId","data-v-77fedea6"]]);export{rt as default};
